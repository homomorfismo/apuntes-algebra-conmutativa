\documentclass[../main.tex]{subfiles}
\begin{document}
	En el siguiente capitulo generalizaremos la construcción del cuerpo de los números racionales desde el anillo de los enteros a cualquier dominio de integridad. Para ello, necesitaremos el siguiente concepto.
	\begin{definition}
		Sea $A$ un anillo conmutativo unitario, donde $0_A\neq 1_A$. $S\subset A$ se dice \textit{multiplicativamente cerrado} si se verifica \begin{enumerate}
			\item $0_A\notin S$
			\item $1_A\in S$
			\item $s_1\cdot s_2\in S, \forall s_1,s_2\in S$
		\end{enumerate}
	\end{definition}
	\begin{example}
		\begin{enumerate}
			\item $S=\{1_A\}$ es multiplicativamente cerrado
			\item Denotemos como $\operatorname{Div_0}(A)$ al conjunto de los divisores de $0$ de $A$. $S=A\setminus \operatorname{Div_0}(A)$ es multiplicativamente cerrado. En efecto, \begin{itemize}
				\item $0_A\in \operatorname{Div_0}(A)$, pues cualquier $a\in A$ verifica que $a\cdot 0_A=0_A$. Por tanto, $0_A\notin S$
				\item Para cada $a\in A\setminus\{0\}$, $1_A\cdot a=a\neq 0$, luego $a\notin \operatorname{Div_0}(A)$, es decir, $1_A\in S$
				\item Dados $s_1,s_2\in S$ y $x\in A\setminus\{0\}$, $(s_1\cdot s_2)\cdot x=s_1\cdot(s_2\cdot x)$. Como $s_1\notin \operatorname{Div_0}(A)$, $s_2\cdot x=0$, pero como $s_2\notin \operatorname{Div_0}(A)$, necesariamente $x=0$, lo que implica $s_1\cdot s_2\in S$.
			\end{itemize}
			\item Dado $\mathfrak{p}$ un ideal primo de $A$, $A\setminus\mathfrak{p}$ es un conjunto multiplicativamente cerrado. En efecto, \begin{itemize}
				\item Por ser ideal, $0\in\mathfrak{p}$
				\item Por ser primo, $1\notin\p$
				\item Por ser primo, si $s_1\cdot s_2\in\p$, necesariamente alguno tiene que estar en $\p$.
			\end{itemize}
		\end{enumerate}
	\end{example}
	\section{Construcción del anillo de fracciones}
	Sea $A$ un anillo conmutativo y unitario. Sea $S\subset A$ un conjunto multiplicativamente cerrado. Definimos en $A\times S$ la siguiente relación$$(a,s_1)\sim (b,s_2)\iff \exists s'\in S : s'(as_2-bs_1)=0$$
	\begin{proposition}
		La relación `$\sim$' es de equivalencia
	\end{proposition}
	\begin{proof}
		Las propiedades reflexiva y simétrica son inmediatas. Para ver la transitiva, supongamos\begin{equation}
		(a,s_1)\sim (b,s_2)\iff \exists s'\in S : s'(as_2-bs_1)=0
		\end{equation} y \begin{equation}
		(b,s_2)\sim (c,s_3)\iff \exists s''\in S : s''(bs_3-cs_2)=0
		\end{equation}
		Multiplicamos la primera ecuación por $s''s_3$ y la segunda por $s's_1$. Sumando ambas expresiones queda $$0_A=s_2s's''(as_3-cs_1)$$ lo que es equivalente a $(a,s_1)\sim (c,s_3)$
	\end{proof}
	\begin{remark}
		Es necesario incluir la existencia del $s'\in S$ para que se cumpla la transitividad, no basta con pedir únicamente que se anule la resta entre los paréntesis.
	\end{remark}
	Al conjunto $A\times S/\sim$ se le suele denotar como $S^{-1}A$. A los elementos $[(a,s)]$ se les denota a su vez como $\frac{a}{s}$. Definimos en este conjunto las siguientes operaciones: \begin{itemize}
		\item $[(a,s)]+[(b,t)]:=[(at+bs,st)]$
		\item $[(a,s)]\cdot[(b,t)]:=[(ab,dt)]$
	\end{itemize}
	Nótese que no son más que las operaciones para fracciones normales.
	\begin{proposition}
		Las operaciones $+$ y $\cdot$ están bien definidas y $(S^{-1}A, +, \cdot)$ es un anillo conmutativo unitario tal que
		$$
		\begin{array}{rrcl}
		\delta_S:&A&\longrightarrow&S^{-1}A\\
		&a&\longmapsto&[(a,1)]
		\end{array}.$$ es un homomorfismo de anillos.
	\end{proposition}
	\begin{proof}
		Veamos que $+$ está bien definida. Supongamos\begin{equation}\label{unoo}
		(a_1,s_1)\sim (a_1',s_1')\iff \exists s_1^{\ast}\in S : s_1^{\ast}(a_1s_1'-a_1's_1)=0
		\end{equation} y \begin{equation}\label{doss}
		(a_2,s_2)\sim (a_2',s_2')\iff \exists s_2^{\ast}\in S : s_2^{\ast}(a_2s_2'-a_2's_2)=0
		\end{equation}
		Multilpicamos $(\ref{unoo})$ por $s_2s_2's_2^{\ast}$ y $(\ref{doss})$ por $s_1s_1's_1^{\ast}$ y sumando ambas expresiones queda $$s_1^{\ast}s_2^{\ast}((s_1's_2')(a_1s_2+a_2s_1)-(s_1s_2)(a_1's_2'+a_2's_1'))=0$$ Esto se traduce en que $$\frac{a_1}{s_1} + \frac{a_2}{s_2}=\frac{a_1'}{s_1'} + \frac{a_2'}{s_2'}.$$
		$+$ verifica la propiedad asociativa:
		\begin{align*}
		&\left(\frac{a_1}{s_1}+\frac{a_2}{s_2}\right)+\frac{a_3}{s_3}=\frac{a_1s_2+a_2s_1}{s_1s_2}+\frac{a_3}{s_3}=\frac{a_1s_2s_3+a_2s_1s_3+a_3s_1s_2}{s_1s_2s_3}=\\&\frac{a_1}{s_1}+\frac{a_2s_3+a_3s_2}{s_2s_3}=\frac{a_1}{s_2}+\left(\frac{a_2}{s_2}+\frac{a_3}{s_3}\right).
		\end{align*}
		La propiedad conmutativa se comprueba fácilmente.

		Comprobemos ahora que $·$ está bien definida. Tomemos dos pares $(a_1,s_1)\sim(a_1',s_1')$ y $(a_2,s_2)\sim(a_2',s_2')$. Existen $s_1^*,\ s_2^*\in S$ tales que
		\begin{equation}\label{m1}
		s_1^{\ast}(a_1s_1'-a_1's_1)=0
		\end{equation} y \begin{equation}\label{m2}
		s_2^{\ast}(a_2s_2'-a_2's_2)=0.
		\end{equation}
		Basta multiplicar ($\ref{m1}$) y ($\ref{m2}$) por $a_2s_2's_2^*$ y $a_1's_1s_1^*$ respectivamente y sumarlas para obtener $(a_1a_2,s_1s_2)\sim(a_1'a_2',s_1's_2')$, es decir,
		$$\frac{a_1}{s_1}·\frac{a_2}{s_2}=\frac{a_1'}{s_1'}·\frac{a_2'}{s_2'}.$$
		Es sencillo comprobar que $\cdot$ verifica las propiedades asociativa y conmutativa.

		Veamos que se cumple la propiedad distributiva:$$\frac{a_1}{s_1}\left(\frac{a_2}{s_2}+\frac{a_3}{s_3}\right)=\frac{a_1a_2s_3+a_1a_3s_2}{s_1s_2s_3}=\frac{a_1s_1a_2s_3+a_1a_3s_1s_2}{s_1^2s_2s_3}=\frac{a_1a_2}{s_1s_2}+\frac{a_1a_3}{s_1s_3}.$$

		Finalmente, que $\delta_S(a)=[(a,1)]$ es un homomorfismo de anillos se sigue sencillamente de la definición.
	\end{proof}
	\begin{remark}\label{iny}
		1) El elemento neutro para $+$ en $S^{-1}A$ es $0_{S^{-1}A}=[(0,1)]$. Además, para cada $s\in S$, se tiene que $[(0,1)]=[(0,s)]$. En efecto, dado $\frac{a}{s}\in S^{-1}A$, $$0_{S^{-1}A}+\frac{a}{s}=\frac{0_A}{1}+\frac{0\cdot s+a}{s}=\frac{a}{s}$$
		y para cada $s\in S$ se tiene trivialmente $1_A(0_As-0_A1_A)=0_A$, es decir, $[(0,1)]=[(0,s)]$.

		2) Análogamente, el elemento neutro para $·$ en $S^{-1}A$ es $1_{S^{-1}A}=[(1,1)]$ y, para cada $s\in S$, se tiene que $[(1,1)]=[(s,s)]$.

		3) El núcleo de $\delta_S$ es el conjunto $\{a\in A:[(a,1)]=[(0,s)], s\in S\}$, esto es, existe un $s^{\ast}$ tal que $s^{\ast}(a-0)=s^{\ast}a=0$. Una condición suficiente para que $\delta_S$ sea inyectiva es que $A$ sea dominio de integridad. Concretamente, $\delta_S$ es inyectiva si, y sólo si, $S\cap\operatorname{Div_0}(A)=\varnothing$.
	\end{remark}

	\subsection{Propiedad universal del anillo de fracciones}
	\begin{theorem}\textbf{(Propiedad universal del anillo de fracciones)} Sean $A$ y $B$ anillos, $S\subset A$ un subconjunto multiplicativamente cerrado de $A$ y $\varphi:A\longrightarrow B$ de forma que $\varphi(s)$ es unidad en $B$ para toda $s\in S$. Bajo estas hipótesis, existe un único homomorfismo $\Phi:S^{-1}A\longrightarrow B$ que cumple
		$$\varphi=\Phi\circ\delta_S$$.
	\end{theorem}

	\begin{proof}
		Supongamos en primer lugar la existencia de tal homomorfismo y probemos su unicidad. Para todo $a\in A$ se tiene que $\Phi(\frac{a}{1})=\Phi\circ\delta_S(a)=\varphi(a)$. Por otra parte, dado $s\in S$, se tiene
		$$1_B=\Phi\left(\frac{1_A}{1_A}\right)=\Phi\left(\frac{s}{s}\right)=\Phi\left(\frac{s}{1_A}\frac{1_A}{s}\right)=\Phi\left(\frac{s}{1_A}\right)\Phi\left(\frac{1_A}{s}\right)=\varphi(s)\Phi\left(\frac{1_A}{s}\right),$$
		es decir, $\Phi(\frac{1_A}{s})={\varphi(s)}^{-1}$. Con todo, para todo $\frac{a}{s}\in S^{-1}A$ se tiene $\Phi(\frac{a}{s})=\varphi(a){\varphi(s)}^{-1}$; es decir, $\Phi$ está unívocamente determinado por $\varphi$.

		Teniendo en cuenta lo anterior, vamos a definir para cada $\frac{a}{s}\in S^{-1}A$
		$$\Phi\left(\frac{a}{s}\right):=\varphi(a){\varphi(s)}^{-1}.$$
		Veamos que está bien definido. Dados dos elementos $\frac{a}{s}$ y $\frac{a'}{s'}$ en la misma clase de equivalencia, existe $s^*\in S$ tal que $s^*(as'-a's)=0_A$. Aplicando $\varphi$ a ambos miembros de la igualdad resulta $\varphi(s^*)(\varphi(a)\varphi(s')-\varphi(a')\varphi(s))=0_B$ y, dado que $\varphi(s^*)$ es unidad por hipótesis, tenemos que $\varphi(a)\varphi(s')-\varphi(a')\varphi(s)=0_B$. De esto se desprende
		$$\varphi\left(\frac{a}{s}\right)=\varphi(a){\varphi(s)}^{-1}=\varphi(a'){\varphi(s')}^{-1}=\Phi\left(\frac{a'}{s'}\right).$$
		Esta última igualdad también se apoya en el hecho de que $\varphi(s)$ y $\varphi(s')$ son unidades.
	\end{proof}

	\begin{remark}
		1) El enunciado del teorema se puede reescribir pidiendo que $B$ sea una $A$-álgebra mediante un homomorfismo $\varphi$.

		2) De la Propiedad universal del anillo de fracciones se deduce que, en el caso de que $A$ sea un DI y $S=\operatorname{Div_0}(A)$, $S^{-1}A$ es el menor cuerpo que contiene a $A$.

		Supongamos $K$ cuerpo tal que $A\subset K$. Como ya hemos comentado en ($\ref{iny}$), $\delta_S$ es un homomorfismo inyectivo, luego también se tiene $A\subset S^{-1}A$. Además, por ser $S^{-1}A$ un cuerpo, $\Phi$ (definido como en el teorema) es de igual forma inyectivo, por lo que $S^{-1}A\subset K$.

		3) Si $S_1$ y $S_2$ son conjuntos multiplicativamente cerrados de $A$ tales que $S_1\subset S_2$, todo $s\in S_1$ verifica que $\delta_{S_2}(s)$ es unidad en ${S_2}^{-1}A$. Así, podemos aplicar el Principio universal del anillo de fracciones y tener que $\delta_{S_2}=\Phi\circ\delta_{S_1}$, de forma que todo elemento $\frac{a}{s}$ de ${S_1}^{-1}A$ se puede ver como uno de ${S_2}^{-1}A$.

		Hay que destacar igualmente que $\Phi$ no es necesariamente inyectiva, puede existir cierto elemento $\frac{a}{s}\in{S_1}^{-1}A$ tal que $\frac{a}{s}\neq0_{{S_1}^{-1}A}$ y cumpla $\frac{a}{s}=0_{{S_2}^{-1}A}$ visto como elemento de ${S_2}^{-1}A$. Una condición suficiente para la inyectividad de $\Phi$ es que se tenga $S_2\cap\operatorname{Div_0}(A)=\varnothing$.
	\end{remark}

	\section{Módulo de fracciones}
	De forma similar a como hemos procedido, consideremos $A$ un anillo, $S\subset A$ un conjunto multiplicativamente cerrado y $M$ un $A$-módulo. Consideremos el conjunto $M\times S$ y definamos en él la siguiente relación `$\sim$': dados $(m_1,s_1),(m_2,s_2)\in M\times S$ se tiene
	$$(m_1,s_1)\sim(m_2,s_2)\Longleftrightarrow\ \exists s\in S\ s(s_2m_1-s_1m_2)=0_M.$$

	\begin{remark}
		En este caso, el producto que estamos considerando es el exterior de $M$ como $A$-módulo.
	\end{remark}

	\begin{proposition}
		La relación `$\sim$' es de equivalencia.
	\end{proposition}

	\begin{proof}
		La prueba es análoga a la hecha para anillos.
	\end{proof}

	Denotemos $S^{-1}M:=M\times S/\sim$ y veamos que lo podemos dotar de una estructura tanto de $A$-módulo como de $S^{-1}A$-módulo. Definamos las siguientes operaciones:
	$$\begin{array}{rrcl}
	+:&S^{-1}M\times S^{-1}M&\longrightarrow&S^{-1}M  \\
	&([(m_1,s_1)],[(m_2,s_2)])&\longmapsto&[(s_2m_1+s_1m_2,s_1s_2)]
	\end{array},$$
	$$\begin{array}{rrcl}
	·:&A\times S^{-1}M&\longrightarrow&S^{-1}M  \\
	&(a,[(m,s)])&\longmapsto&[(am,s)]
	\end{array}$$
	y
	$$\begin{array}{rrcl}
	*:&S^{-1}A\times S^{-1}M&\longrightarrow&S^{-1}M  \\
	&([(a,s_1)],[(m,s_2)])&\longmapsto&[(am,s_1s_2)]
	\end{array}.$$

	\begin{proposition}
		Las aplicaciones $+$, $·$ y $*$ están bien definidas.
	\end{proposition}

	\begin{proof}
		La prueba para $+$ es análoga al caso de los anillos de fracciones. Veamos las otras dos.

		Sean $(m,s),(m',s')\in M\times S$ tales que $(m,s)\sim(m',s')$. Existe $s^*\in S$ tal que $s^*(s'm-sm')=0_M$. Así, dado $a\in A$, tenemos que
		$$0_M=a(s^*(s'm-sm')=s^*(s'(am)-s(am')),$$
		es decir, $(am,s)\sim (am',s')$ y $·$ está bien definida.

		Sean ahora $(a,s_1),(a',s_1')\in S^{-1}A$ y $(m,s_2),(m',s_2')\in M\times S$ tales que $(a,s_1)\sim(a,s_1')$ y $(m,s)\sim(m',s')$. Existen $s_3,s_3'\in S$ tales que
		\begin{equation}\label{ext1}
		s_3(as_1'-a's_1)=0_A
		\end{equation} y \begin{equation}\label{ext2}
		s_3'(s_2'm-s_2m')=0_M.
		\end{equation}
		A partir de estas igualdades obtenemos las siguientes
		\begin{equation}\label{ext3}
		s_3(as_1'-a's_1)(s_2's_3m)=0_A(s_2's_3m)=0_M
		\end{equation} y \begin{equation}\label{ext4}
		(a's_1s_3)s_3'(s_2'm-s_2m')=0_M
		\end{equation}
		y sumándolas resulta
		$$s_3s_3'(s_1's_2'am-s_1s_2a'm')=0_M,$$
		es decir, $(am,s_1s_2)\sim(a'm',s_1's_2')$ y $*$ está bien definida.
	\end{proof}

	\begin{remark}
		En la prueba de $*$ hay que tener la precaución en este caso (y en comparación con las pruebas anteriores) de que el producto que se considera es el exterior de $M$. Más aún, los elementos de ($\ref{ext1}$) son elementos de $A$ y los de ($\ref{ext2}$) lo son de $M$. El paso a ($\ref{ext3}$) y ($\ref{ext4})$ permite sumarlas.
	\end{remark}

	\begin{proposition}
		$(S^{-1}M,+)$ dotado con el producto exterior $·$ es un $A$-módulo.
	\end{proposition}

	\begin{proof}
		Por definición de $·$ (que involucra únicamente al `numerador'), su comportamiento como producto exterior es el mismo que el del producto exterior definido en $M$. Vemos así que precisamente por ser $M$ un $A$-módulo también $S^{-1}M$ lo es.
	\end{proof}

	\begin{proposition}
		$(S^{-1}M,+)$ dotado con el producto exterior $*$ es un $S^{-1}A$-módulo.
	\end{proposition}

	\begin{proof}
		A lo largo de la prueba (y en adelante siempre que no haya posibilidad de confusión) se omitirá el símbolo $\ast$. Comprobemos que se verifican los cuatro axiomas de la definición de $S^{-1}A$-módulo.
		\begin{itemize}
			\item[i)] En primer lugar, claramente se tiene $$1_{S^{-1}A}\frac{m}{s}=\frac{1_A}{1_A}\frac{m}{s}=\frac{1_Am}{1_As}=\frac{m}{s},\hspace{15pt}\text{para todo}\ \frac{m}{s}\in S^{-1}M.$$
			\item[ii)] Sean $\frac{a}{s}\in S^{-1}M$ y $\frac{m_1}{s_1},\frac{m_2}{s_2}\in S^{-1}M$. Tenemos
			\begin{align*}
			\frac{a}{s}\left(\frac{m_1}{s_1}+\frac{m_2}{s_2}\right)&=\frac{a}{s}\frac{s_2m_1+s_1m_2}{s_1s_2}=\frac{as_2m_1+as_1m_2}{ss_1s_2}\\
			&\overset{i)}{=}\frac{s}{s}\frac{s_2m_1+s_1m_2}{ss_1s_2}=\frac{as_2sm_1+as_1sm_2}{ss_1ss_2}=\frac{am_1}{ss_1}+\frac{am_2}{ss_2}.
			\end{align*}
			\item[iii)] Ahora, dados $\frac{a_1}{s_1},\frac{a_2}{s_2}\in S^{-1}A$ y $\frac{m}{s}\in S^{-1}M$ se tiene
			\begin{align*}
			\left(\frac{a_1}{s_1}+\frac{a_2}{s_2}\right)\frac{m}{s}&=\frac{a_1s_2+a_2s_1}{s_1s_2}\frac{m}{s}=\frac{a_1s_2m+a_2s_1m}{s_1s_2s}\\
			&\overset{i)}{=}\frac{s}{s}\frac{a_1s_2m+a_2s_1m}{s_1s_2s}=\frac{a_1s_2sm_1+a_2s_1sm_2}{s_1ss_2s}=\frac{a_1m}{s_1s}+\frac{a_2m}{s_2s}
			\end{align*}
			\item[iv)] Por último, sean $\frac{a_1}{s_1},\frac{a_2}{s_2}\in S^{-1}A$ y $\frac{m}{s}\in S^{-1}M$. Resulta
			$$\left(\frac{a_1}{s_1}\frac{a_2}{s_2}\right)\frac{m}{s}=\frac{(a_1a_2)m}{(s_1s_2)s}=\frac{a_1(a_2m)}{s_1(s_2s)}=\frac{a_1}{s_1}\left(\frac{a_2}{s_2}\frac{m}{s}\right).$$
		\end{itemize}
	\end{proof}

	En vista de este último resultado, parece natural definir un funtor, $S^{-1}$, entre las categorías $\Mod_A$ y $\Mod_{S^{-1}A}$ de tal manera que:
	\begin{itemize}
		\item $S^{-1}(M):=S^{-1}M$ para cada $M$ $A$-módulo y,
		\item dados $M$ y $N$ $A$-módulos, para cada $f\in\Hom_A(M,N)$
		$$\begin{array}{rrcl}
		S^{-1}(f):=S^{-1}f:&S^{-1}M&\longrightarrow&S^{-1}N \\
		&\frac{m}{s}&\longmapsto&\frac{f(m)}{s}
		\end{array}.$$
	\end{itemize}

	\begin{lemma}
		Dados $M_1, M_2$ y $M_3$ $A$-módulos, $f\in\Hom_A(M_1,M_2)$ y $g\in\Hom_A(M_2,M_3)$ se verifica
		$$S^{-1}(g\circ f)=S^{-1}g\circ S^{-1}f.$$
	\end{lemma}

	\begin{proof}
		Dado $\frac{m}{s}\in M_1$ se tiene
		\begin{align*}
		S^{-1}(g\circ f)\left(\frac{m}{s}\right)=\frac{(g\circ f)(m)}{s}=\frac{g(f(m))}{s}=S^{-1}{g}\left(\frac{f(m)}{s}\right)=(S^{-1}{g}\circ S^{-1}{f})\left(\frac{m}{s}\right).
		\end{align*}
	\end{proof}

	\begin{proposition}
		Si $M'\overset{f}{\longrightarrow}M\overset{g}{\longrightarrow}M''$ es una sucesión exacta, entonces la sucesión $$S^{-1}M'\overset{S^{-1}f}{\longrightarrow}S^{-1}M\overset{S^{-1}g}{\longrightarrow}S^{-1}M''$$ también lo es.
	\end{proposition}

	\begin{proof}
		Veamos en primer lugar la inyectividad y la sobreyectividad de $S^{-1}f$ y $S^{-1}g$ respectivamente. Sea $\frac{m'}{s}\in S^{-1}M'$ tal que $S^{-1}f\left(\frac{m}{s}\right)=0_{S^{-1}M}$. Por ser así, existe $t\in S$ de forma que $tf(m')=0_M$ y, como $f\in\Hom_A(M',M)$ y es inyectiva, $tm'=0_{M'}$, es decir, $\frac{m'}{s}=0_{S^{-1}M'}$.
		Consideremos ahora $\frac{m''}{s}\in S^{-1}M''$. Dado $m''\in M''$ y por ser $g$ sobreyectiva existe $m\in M$ tal que $g(m)=m'$, es decir, $S^{-1}g\left(\frac{m}{s}\right)=\frac{m''}{s}$.

		Comprobemos ahora que $\operatorname{im}(S^{-1}f)=\ker (S^{-1}g)$. En primer lugar, como $g\circ f\equiv 0_{M''}$, el lema anterior nos dice que
		$$0_{S^{-1} M''}\equiv S^{-1}(g\circ f)=S^{-1} g\circ S^{-1} f,$$
		es decir, $\operatorname{im} (S^{-1}f)\subseteq \ker(S^{-1}g)$. Por otra parte, dado $\frac{m}{s}\in\ker(S^{-1}g)$, tenemos que existe $t\in S$ tal que $tg(m)=0_{M''}$ y por ser $g$ homomorfismo esto implica que $tm\in\ker(g)$, es decir, existe a su vez $m'\in M'$ tal que $f(m')=tm$. Es por esto que basta considerar el elemento $\frac{m'}{ts}$ de forma que $f(\frac{m'}{ts})=\frac{tm}{ts}=\frac{m}{s}$ y $\ker(g)\subseteq\operatorname{im}(f)$.
	\end{proof}

	Demostremos este mismo hecho (que el funtor $S^{-1}$ es exacto) de una forma alternativa. Para ello, probemos antes algunos resultados.

	\begin{proposition}
		Dado un anillo $A$ y un subconjunto multiplicativamente cerrado $S\subset A$ se tiene que $S^{-1}A$ es un $A$-módulo plano.
	\end{proposition}

	\begin{proof}
		Para probarlo vamos a usar la caracterización por ecuaciones. Sean $a_i\in A$ y $\frac{\alpha_i}{s_i}\in\ S^{-1}A$, $i\in\{1,\dots,n\}$ tales que
		$$\sum_{i=1}^na_i\frac{\alpha_i}{s_i}=0_{S^{-1}A}.$$
		Denotando $s^*:=\prod_{j=1}^ns_j$ y $s_i^*:=\prod_{j\neq i}s_j$ resulta
		$$0_{S^{-1}A}=\sum_{i=1}^na_i\frac{\alpha_i}{s_i}=\sum_{i=1}^na_i\frac{s_i^*\alpha_i}{s^*}=\frac{\sum_{i=1}^na_is_i^*\alpha_i}{s^*},$$
		es decir, existe $t\in S$ tal que
		$$t(\sum_{i=1}^na_is_i^*\alpha_i)=0_A.$$
		De esta forma, basta considerar $m_i':=\frac{1}{ts^*}\in S^{-1}A$ y $\lambda_{i,i}:=ts_i^*\alpha_i\in A$ para tener
		$$m_i=\lambda_{i,i}m_i'$$
		y
		$$\sum_{i=1}^na_i\lambda_{i,i}=0_A.$$
	\end{proof}

	\begin{proposition}Dado un anillo $A$, un subconjunto multiplicativamente cerrado $S\subset A$ y un $A$-módulo $M$ se tiene
		$$S^{-1}A\otimes_AM\cong S^{-1}M.$$
	\end{proposition}
	\begin{proof}
		Comencemos definiendo una aplicación
		$$\begin{array}{rrcl}
		F:&S^{-1}A\times M&\longrightarrow&S^{-1}M\\
		&(\frac{a}{s},m)&\longmapsto&\frac{am}{s}
		\end{array}.$$
		En primer lugar, veamos que $F$ está bien definida. Sean $\frac{a_1}{s_1}=\frac{a_2}{s_2}$ de forma que existe $s\in S$ tal que $s(s_2a_1-s_1a_2)=0_A$. Tenemos que
		$$s(s_2a_1m-s_1a_2m)=0_A\Longleftrightarrow \frac{a_1m}{s_1}=\frac{a_2m}{s_2}\Longleftrightarrow F\left(\frac{a_1}{s_1},m\right)=F\left(\frac{a_2}{s_2},m\right).$$

		Por otro lado, es claro que $F$ es $A$-bilineal. Así, tenemos que existe un único homomorfismo $A$-lineal $f: S^{-1}A\otimes_AM\longrightarrow S^{-1}M$ tal que $f(\frac{a}{s}\otimes m)=\frac{am}{s}$.

		[Comprobemos que $f$ es inyectiva. Si $f(\frac{a}{s}\otimes m)=0_M$, entonces $\frac{am}{s}=0_{S^{-1}M}$, es decir, existe $t\in S$ tal que $tam=0_M$. Así,
		$$\frac{a}{s}\otimes m=\frac{ta}{ts}\otimes m=\frac{1_A}{ts}\otimes tam=0_{S^{-1}A\otimes M}$$
		La sobreyectividad también es clara. Con todo $f$ es un isomorfismo.]

		De forma análoga, definimos la aplicación
		$$\begin{array}{rrcl}
		h:&S^{-1}M&\longrightarrow&S^{-1}A\otimes M\\
		&\frac{m}{s}&\longmapsto&\frac{1_A}{s}\otimes m
		\end{array}.$$
		De nuevo debemos comprobar que está bien definida. Dados $\frac{m_1}{s_1}=\frac{m_2}{s_2}\in S^{-1}M$ existe $s\in S$ tal que $s(s_2m_1-s_1m_2)=0_M$ o equivalentemente $ss_2m_1=ss_1m_2$. Es por esto que
		\begin{align*}
		h\left(\frac{m_1}{s_1}\right)=\frac{1_A}{s_1}\otimes m_1&=\frac{ss_2}{ss_2s_1}\otimes m_1=\frac{1_A}{ss_2s_1}\otimes ss_2m_1\\
		&=\frac{1_A}{ss_2s_1}\otimes ss_1m_2=\frac{ss_1}{ss_2s_1}\otimes m_2=\frac{1_A}{s_2}\otimes m_2=h\left(\frac{m_2}{s_2}\right).
		\end{align*}
		Por último, tenemos tanto que $h\circ f$ restringida a los elementos de la forma $\frac{a}{s}\otimes m\in S^{-1}A\otimes_A M$ como $f\circ h$ a los $\frac{m}{s}\in S^{-1}M$ resultan ser las respectivas identidades $\operatorname{Id}_{S^{-1}A\otimes_A M}$ y $\operatorname{Id}_{S^{-1}M}$; es decir, $f=h^{-1}$ y $$S^{-1}A\otimes_A M\cong S^{-1}M.$$
	\end{proof}

	Podemos ya concluir la prueba alternativa de $\ref{S-1exacto}$.
	\begin{proof}[Proof \ref{S-1exacto}]
		Dada la sucesión exacta $M'\overset{f}{\longrightarrow}M\overset{g}{\longrightarrow}M''$, tensorizando por el $A$-módulo plano $S^{-1}A$ resulta que
		$$S^{-1}A\otimes_AM'\overset{\operatorname{Id}_{S^{-1}A}\otimes f}{\longrightarrow}S^{-1}A\otimes_AM\overset{\operatorname{Id}_{S^{-1}A}\otimes g}{\longrightarrow}S^{-1}A\otimes_AM''$$
		también es exacta.

		Sean $\varphi:S^{-1}A\otimes_AM'\longrightarrow S^{-1}M$ y $\psi:S^{-1}A\otimes_AM\longrightarrow S^{-1}M$ isomorfismos que sabemos que existen y veamos que $\operatorname{Id}_{S^{-1}A}\otimes f=\psi^{-1}\circ S^{-1}f\circ \varphi.$ Esto es claro puesto que, dado $\frac{a}{s}\otimes m\in S^{-1}A\otimes_A M'$, se tiene
		\begin{align*}
		\psi^{-1}\circ S^{-1}f\circ \varphi\left(\frac{a}{s}\otimes m\right)&=\psi^{-1}\circ S^{-1}f\left(\frac{am}{s}\right)\\
		&=\psi^{-1}\left(\frac{af(m)}{s}\right)\\
		&=\frac{1_A}{s}\otimes af(m)=\frac{a}{s}\otimes f(m)=\operatorname{Id}_{S^{-1}A}\otimes f\left(\frac{a}{s}\otimes m\right).
		\end{align*}
		Esto mismo se prueba para el homomorfismo $\operatorname{Id}_{S^{-1}A}\otimes g$ y los $A$-módulos $M$ y $M''.$

		De todo lo anterior se sigue que la sucesión
		$$S^{-1}M'\overset{S^{-1}f}{\longrightarrow}S^{-1}M\overset{S^{-1}g}{\longrightarrow}S^{-1}M''$$
		es exacta.
	\end{proof}
	\begin{example}
Sea $A$ un anillo y $\p_0\in \operatorname{Spec}(A)$. Sea $S=A\setminus\p_0$. $S$ es multiplicativamente cerrado y definimos $A_{\p_0}=S^{-1}A$. Existe una biyección, dada por la extensión-contracción, entre $$\operatorname{Spec}(A_{\p_0})\longleftrightarrow \operatorname{Spec}(A)\setminus\{\p\in \operatorname{Spec}(A):\p\cap(A\setminus\p_0)=\varnothing\}=\{\p\in \operatorname{Spec}(A):\p\subset\p_0\}$$
Geométricamente, tomando $A\overset{\delta}{\longrightarrow}A_{\p_0}$, se considera $\delta^{\ast}:\operatorname{Spec}(A_{\p_0})\longrightarrow \operatorname{Spec}(A)$, siendo $\operatorname{im}(\delta^{\ast})=\{\p:\p\subset \p_0\}$. De esta forma, todo ideal primo de $A_{\p_0}$ es el extendido de un ideal primo de $A$ que está contenido en $\p_0$. Es decir, todo ideal primo de $A_{\p_0}$ está contenido en $\p_0^e$.

$A_{\p_0}$ es un anillo local. Su único ideal maximal es $\p_0^e=\{\frac{x}{s}:x\in A, s\notin\p_0\}$.
\end{example}
\begin{definition}
Sea $\p$ un ideal primo de un anillo $A$. Un ideal $\q$ se dice $\p_0$-\textit{primario} si $\q$ es primario y $\sqrt{\q}=\p$.
\end{definition}
\begin{proposition}
Sea $A$ un anillo y sea $\p_0\in \operatorname{Spec(A)}$ y tomemos $A_{\p_0}$ como en el ejemplo anterior. Hay una biyección entre los ideales primos de $A$ contenidos en $\p_0$ y los ideales primos de $A_{\p_0}$. Esta biyección conserva el ser $\p_0$-primario.
\end{proposition}
\begin{proof}
Consideremos $\delta:A\longrightarrow A_{\p_0}$. Supongamos $\q$ $\p_0$-primario. Veamos que $\q^e$ es $A_{\p_0}$-primario. Sean $\frac{x_1}{s_1},\frac{x_2}{s_2}\in A_{\p_0}$ tal que $\frac{x_1}{s_1}\frac{x_2}{s_2}\in\q^e$. Supongamos que $\frac{x_1}{s_1}\notin\q^e$. Se tiene $\frac{x_1}{s_1}\frac{x_2}{s_2}=\frac{q}{s}$, con $q\in\q, s\notin\p_0$. Esto es, existe $s'\notin\p_0$ tal que $s'(sx_1x_2-qs_1s_2)=0_A$, luego $s'sx_1x_2\in\q$.

Como $\frac{x_1}{s_1}\notin \q^e, x_1\notin\q$, pues de estarlo podríamos escribir $\frac{x_1}{s_1}=\frac{x_1}{1}\frac{1}{s_1}\in\q^e$. Entonces, por ser $\q$ $\p_0$-primario, $s'sx_2\in\sqrt{\q}=\p_0$. Por ser $\p_0$ primo y $ss'\notin\p_0$, $x_2\in\p_0$. Por tanto, existe un $n\in\N$ tal que $x_2^n\in\q^n$, luego $(\frac{x_2}{s_2})^n\in\q^e$. Hemos visto que $\q^e$ es primario y que su raíz es $\p_0$, pues $\frac{x_2}{s_2}\in\p_0^e$.

Recíprocamente, tomemos un ideal $\q'$ que sea $\delta(\p_0)A_{\p_0}$-primario. Nótese que $\delta(\p_0)A_{\p_0}=\p_0^e$. Supongamos $x_1,x_2\in A$ tal que $x_1x_2\in\q'^c$ y $x_1\notin\q'^c$. Esto es, $\frac{x_1x_2}{1}\in\q'$. Como $\frac{x_1}{1}\notin\q'$, se tiene que $\frac{x_2}{1}\in\p_0^e$, ya que $\q'$ es $p_0^e$-primario. Es decir, $x_2\in\p_0^{ec}= \delta^{-1}(\p_0^e)$. Como $\p_0^{ec}=\p_0$, $x_2\in\p_0$.
\end{proof}
\begin{remark}
Dado $\p_0\in\operatorname{Spec}(A)$, $\p_0^n$ no es necesariamente $\p_0$-primario. Sin embargo, hay algo que se le aproxima bastante.

Tomando $A\overset{\delta}{\longrightarrow}A_{\p_0}$, $\p_0^e$ es maximal. En este caso, sí tenemos que $(\p_0^e)^n$ tiene por raíz un maximal, a saber $\p_0^e$, $p_0^e$-primario. Se tiene que $((\p_0^e)^n)^e$ es $\p_0$-primario.

A esto se le llama \textit{potencias simbólicas} y se denota $\p_0^n$.
\end{remark}
Tenemos ya maquinaria suficiente para construir anillos locales.
\begin{theorem}\textbf{(de Cayley)}. Sean $A$ un anillo, $\af$ un ideal de $A$, $M$ un $A$-módulo finitamente generado y $f:M\longrightarrow M$ una aplicación $A$-lineal tal que $f(M)\subset \af M$. Entonces, existen $a_i\in\af, n\in\N$ tal que $$f^{(n)}+a_1s^{(n-1)}+\dots+a_iI_M=0_{Hom_A(M,M)}$$
donde cada $f^{(i)}=f\circ\overset{(i)}{\dots}\circ f$
\end{theorem}
\begin{proof}

\end{proof}
\begin{lemma}\textbf{(de Nakayama)}. Se expresa en tres formulaciones equivalentes.\begin{enumerate}
    \item Sea $A$ un anillo local, $\mathfrak{m}$ su único ideal maximal y $M$ un $A$-módulo finitamente generado. Si $\mathfrak{m} M=M$, entonces $M=0$.
    \item Sea $A$ un anillo local, $\mathfrak{m}$ su único ideal maximal y $M$ un $A$-módulo finitamente generado. Si $N\subset M$ y $N+\mathfrak{m}M=M$, entonces $M=N$.
    \item Sea $A$ un anillo local maximal y sea $M$ un $A$-módulo finitamente generado. Entonces, el menor número de generadores de $M$ como $A$-módulo es la dimensión de $A/M$.
\end{enumerate}

\end{lemma}
\end{document}
